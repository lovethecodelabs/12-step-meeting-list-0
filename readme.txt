=== 12 Step Meeting List ===
Contributors: meetingguide, aasanjose
Donate link: https://meetingguide.org/donate
Tags: 12-step, aa, al-anon, coda, meetings, na, oa, saa, slaa
Requires at least: 3.2
Tested up to: 4.8
Stable tag: 2.15

This plugin helps 12 step programs list their meetings. It standardizes addresses, and displays results in a searchable list and map.

== Description ==

This plugin helps 12 step programs list their meetings. It standardizes addresses, and displays results in a searchable list and map.

It's also the easiest way to have your area's meetings listed in the [Meeting Guide mobile app](https://meetingguide.org/) for iOS and Android devices.

It was originally designed to maintain a list of AA meetings in Santa Clara County, CA. It's now in use in the following areas:

**Alcoholics Anonymous**

1. [Arkansas](http://arkansascentraloffice.org/meetings/)
1. [Austin, TX](http://austinaa.org/meetings/)
1. [Batavia, IL](https://aadistrict61.org/archives/meetings)
1. [Baton Rouge, LA](http://aabatonrouge.org/meetings/)
1. [Bethlehem, PA](https://www.aalv.org/meetings)
1. [Bowling Green, KY](http://bowlinggreenaa.org/meetings/)
1. [CancÃºn, Mexico](http://aacancun.org/meetings/)
1. [Charleston, WV](http://aawvdist1.org/wordpress/?post_type=tsml_meeting)
1. [Charlotte, NC](http://charlotteaa.org/meetings/)
1. [Cincinnati, OH](http://cincinnatiaa.org/meetings/)
1. [Continental Europe](http://alcoholics-anonymous.eu/meetings/)
1. [Colorado Springs, CO](http://www.coloradospringsaa.org/meetings/)
1. [Corpus Christi, TX](http://www.cbiaa.org/meetings/)
1. [Davis, CA](http://aadavis.org/meetings/)
1. [Dayton, OH](http://aadaytononline.org/meetings/)
1. [Daytona, FL](http://aadaytona.org/meetings/)
1. [DuPage County, IL](http://dist41.aa-nia.org/meetings/)
1. [East Bay, CA](http://eastbayaa.org/meetings)
1. [Elk Grove Village, IL](http://d15aa.org/d15aa.org/?post_type=meetings)
1. [Fargo, ND](http://www.fmmeetinglist.org/meetings/)
1. [Ft. Worth, TX](http://fortworthaa.org/?post_type=tsml_meeting)
1. [Greensboro, NC](http://nc23.org/meetings/)
1. [Harrisburg, PA](http://www.aaharrisburg.org/meetings/)
1. [Hernando County, FL](http://www.aahernando.org/meetings/)
1. [Joliet, IL](http://aadistrict51.org/meetings/)
1. [Midlands, UK (Polish)](http://intergrupamidlands.co.uk/meetings/)
1. [Kansas](https://ks-aa.org/meetings/)
1. [Kentucky](http://www.area26.net/wp/?post_type=tsml_meeting)
1. [Lewis County, WA](http://lewiscountyaa.org/meetings/)
1. [Long Beach, CA](https://hacoaa.org/meetings/)
1. [Madison, WI](http://aamadisonwi.org/meetings/)
1. [Maine and New Brunswick](http://csoaamaine.org/meetings/)
1. [Maui, HI](http://aamaui.org/meetings)
1. [Mesa, AZ](http://aamesaaz.org/meetings/)
1. [Miami, FL](https://aamiamidade.org/meetings)
1. [Minneapolis, MN](http://aaminneapolis.org/meetings/)
1. [Mississippi](http://www.aa-mississippi.org/meetings/)
1. [Modesto, CA](http://wp.cviaa.org/meetings/)
1. [Montreal, Canada](http://aa87.org/meetings/)
1. [Napa, CA](http://www.aanapa.org/meetings)
1. [Naples, FL](http://aanaples.org/meetings/)
1. [New Hampshire](http://nhaa.net/meetings/)
1. [New Orleans, LA](http://www.aaneworleans.org/meetings/)
1. [New Mexico](https://nm-aa.org/meetings/)
1. [New York, NY](https://www.nyintergroup.org/meetings/)
1. [North Central Washington](http://aancw.org/meetings)
1. [Oahu, HI](http://oahucentraloffice.com/meetings/)
1. [Oklahoma](http://aaoklahoma.org/meetings)
1. [Orlando, FL](http://cflintergroup.org/meetings/)
1. [Philadelphia, PA](http://www.aasepia.org/meetings/)
1. [Portland, OR](http://home.pdxaa.org/meetings/)
1. [Rochester, MN](http://aadistrict1.org/blog/meetings/)
1. [Rhode Island](https://aainri.com/meetings/)
1. [Sacramento, CA](http://aasacramento.org/meetings/)
1. [San Francisco, CA](https://www.aasf.org/meetings)
1. [San Jose, CA](https://aasanjose.org/meetings)
1. [San Mateo, CA](http://aa-san-mateo.org/meetings)
1. [Santa Fe, NM](http://santafeaa.org/meetings/)
1. [Savannah, GA](http://savannahaa.com/meetings-list/)
1. [Secular AA](https://www.secularaa.org/meetings/)
1. [Southern Colorado](http://www.puebloaa.org/meetings/)
1. [Sonoma County, CA](http://www.sonomacountyaa.org/meetings/)
1. [St. Louis, MO](https://aastl.org/meetings/)
1. [State College, PA](http://www.district43.com/meetings/)
1. [Streamwood, IL](http://dist23.aa-nia.org/meetings)
1. [Tidewater Area, VA](http://www.tidewaterintergroup.org/meetings/)
1. [Toronto, Canada](https://aatoronto.org/meetings/)
1. [Tri Valley, CA](http://trivalleyaa.org/meetings/)
1. [Topeka, KS](http://aatopeka.org/meetings/)
1. [Tulsa, OK](http://district40aa.com/meetings)
1. [Vancouver, Canada](http://www.vancouveraa.ca/meetings/)
1. [Ventura County, CA](https://aaventuracounty.org/meetings)
1. [Vienna, Austria](https://www.aavienna.com/meetings/)
1. [Virginia](https://aavirginia.org/meetings/)
1. [Walnut Creek, CA](http://contracostaaa.org/meetings)
1. [Warsaw, IN](http://www.aadistrict4143.com/meetings/)
1. [Washington, DC](https://aa-dc.org/meetings)
1. [Wenatchee, WA](http://aancw.org/meetings)
1. [West Hawaii, HI](http://www.westhawaiiaa.org/meetings/)
1. [West-Central Wisconsin](http://www.district05.org/meetings/)
1. [Western Slope, CA](http://westernsloped22.org/meetings/)
1. [Western Kentucky](http://wkintergroup.org/meetings/)
1. [Western Washington](http://area72aa.org/meetings/)
1. [Wilmington, DE](http://ndiaa.org/meetings/)
1. [Woodstock, IL](http://aa-nia-dist11.org/meetings/)

**Adult Children of Alcoholics**

1. [Southern California](http://www.socalaca.org/meetings/?d=any)
1. [Texas](http://lonestaraca.org/meetings/)

**Al-Anon**

1. [Lancaster, PA](http://lanclebalanon.org/meetings/?d=any)
1. [Naples, FL](https://naplesafg.org/meetings)
1. [Pennsylvania](http://pa-al-anon.org/meetings/)

**Codependents Anonymous**

1. [Los Angeles, CA](http://www.lacoda.org/)
1. [South SF Bay Area, CA](http://www.sbcoda.org/meetings/?d=any&v=list)

**Debtors Anonymous**

1. [Southern California](http://socalda.org/meetings/)

**Heroin Anonymous**

1. [Arizona](https://meetings.haazarea.org/meetings/)

**Narcotics Anonymous**

1. [Chinook, CA](http://chinookna.org/meetings/)
1. [Maine](http://www.namaine.org/meetings/)
1. [Martha's Vineyard](http://www.mvana.org/meetings/?tsml-day=any)
1. [Poland](http://anonimowinarkomani.org/meetings/)
1. [Vienna](https://www.navienna.com/meetings/?d=any)

**Refuge Recovery**

1. [Oakland, CA](http://refugerecoveryoakland.org/meetings/)

**Sex Addicts Anonymous**

1. [Indiana](http://indiana-saa.org/meetings/)

**Sexaholics Anonymous**

1. [St. Louis, MO](http://www.sastl.net/meetings/?tsml-day=any)

[Let us know](mailto:info@meetingguide.org) if you're using this plugin and would like to be listed here.

= Notes =

* The Meeting Notes field is for any non-standardized meeting info, such as Basement, or Building C
* Location should be a simple place-name, eg Queen of the Valley Hospital
* Address should only be the address; no "Upstairs" or "Building C" or "Near 2nd Ave"
* You can fill in a very basic address and then when you tab away from that field you will see it try to standardize the address for you. If you write "1000 trancas, napa" it will replace it with "1000 Trancas St, Napa, CA 94558, USA."

== Installation ==

Basically you can just install it and you should be good to go. For a quick walkthrough of the process, check out this screencast video:

[youtube https://www.youtube.com/watch?v=Qqg1RPX-FTQ]

== Frequently Asked Questions ==

= My meeting type isn't listed! =
If it's a broadly-applicable meeting type, please [contact us](mailto:wordpress@meetingguide.org) so we can include it for you. We want to maintain consistency for the [mobile apps](https://meetingguide.org/), so not all proposals are included.

If you have access to your theme's functions.php, you may add additional meeting types for your area. Simply adapt the following example to your purposes:

	if (function_exists('tsml_custom_types')) {
		tsml_custom_types(array(
			'XYZ' => 'My Custom Type',
		));
	}
	
Please note a few things about custom types:

1. Once you've added the type, you will see it under 'More' on the Meeting edit screen. It will show up in the dropdown once you use it on a meeting.
1. Be careful with the codes ("XYZ" in the above example) as this gives you the ability to replace existing types. 
1. Note that custom meeting types are not imported into the Meeting Guide app.
1. They are for searching. If you can't imagine yourself searching for a meeting this way, then it's probably not a type you need. Have you ever searched for a 90-minute meeting? If not, then it's probably information that better belongs in the meeting notes.
1. Don't add a type for the default, eg 'Hour Long Meeting' or 'Non-Smoking.' If you do that, then you have to be careful about tagging every single meeting in order to make the data complete.

= Where are my meetings listed? =
It depends on your Permalinks setup. The easiest way to find the link is to go to the **Dashboard > Meetings > Import & Settings** page and look for it under "Where's My Info?"

= How can I make the Region dropdown not be collapsible? =
No problem, just add this CSS to your theme:

	div#meetings .controls ul.dropdown-menu div.expand { display: none; }
	div#meetings .controls ul.dropdown-menu ul.children { height: auto; }

= How can I show Any Day by default? =
The easiest way is to link to that view straight from your navigation. Usually that looks like `/meetings/?tsml-day=any`, but it can vary depending on your settings.

If you'd prefer to keep the default address, you could add this code to your theme's functions.php instead:

	$tsml_defaults['day'] = null;

= How do I change the default search radius for location searches? =
Add this to your theme's functions.php. The value should be an existing value, ie 1, 5, 10, 25 or 50.

	$tsml_defaults['distance'] = 25;

= Can I get the meeting list to display the full address, including city, state and country? =
Add this to your theme's functions.php.

	$tsml_street_only = false;

= Can I change the order of the columns on the meeting list page, eg put the Region first? =
Add this to your theme's functions.php.

	$tsml_columns = array('Region', 'Time', 'Distance', 'Name', 'Location', 'Address', 'Types');

= Can I change the default sort order on the meeting list page? =
By default, the plugin sorts by day, then time, then location name. To set your own sort index, add this to your functions.php:

	$tsml_sort_order = 'region'; //options are name, location, address, time, or region

= How can I override the meeting list or detail pages? =
Copy the files from the plugin's templates directory into your theme's root directory. If you're using a theme from the Theme Directory, you may be better off creating a [Child Theme](https://codex.wordpress.org/Child_Themes). Now, you may override those pages. The archive-meetings.php file controls the meeting list page, single-meetings.php controls the meetings detail, and single-locations.php controls the location detail.


= Can I import a custom spreadsheet format? =
It will take some work on your end, but it's possible. Create a function called tsml_import_reformat, and use it to 
reformat your CSV data to the standard format

	if (!function_exists('tsml_import_reformat')) {
		function tsml_import_reformat($meetings) {
			//your code goes here
			return $meetings;
		}
	}

= How can I change some of the text on the template pages, eg the column headings? =
You can make use of the [gettext filter](https://codex.wordpress.org/Plugin_API/Filter_Reference/gettext) to override the plugin's translation strings. For example, if you wanted to replace 'Region' with 'Province,' you could add the following to your functions.php file.

	function theme_override_tsml_strings($translated_text, $text, $domain) {
		if ($domain == '12-step-meeting-list') {
			switch ($translated_text) {
				case 'Region':
					return 'Province';
			}
		}
		return $translated_text;
	}
	add_filter('gettext', 'theme_override_tsml_strings', 20, 3);

= Are there any shortcodes? =
Yes, you can use `[tsml_meeting_count]`, `[tsml_location_count]`, `[tsml_group_count]`, and `[tsml_region_count]` to display human-formatted counts of your entities. For example, "Our area currently comprises [tsml_meeting_count] meetings." Also `[tsml_next_meetings count="5"]` displays a small table with the next several meetings in it. Use the `count` parameter to adjust how many are displayed. This will be unstyled if you're not using bootstrap in your theme.

= Are there translations to other languages? =
It is translated into Polish. If you would like to volunteer to help translate another language, we would be pleased to work with you.

= I entered contact information into the meeting edit page but don't see it displayed on the site. =
That's right, we don't display that information by default for the sake of anonymity. To display it in your theme, you should follow the instructions above for overriding the meeting detail and location detail pages and then drop some or all of these tags in your PHP:

	<?php echo $meeting->contact_1_name?>
	<?php echo $meeting->contact_1_email?>
	<?php echo $meeting->contact_1_phone?>

= Can I run this as my main website homepage? =
Sure. Try this code:

	add_action('pre_get_posts', 'tsml_front_page');
	
Also check out our [One Page Meeting List](https://github.com/meeting-guide/one-page-meeting-list) theme.
	
== Screenshots ==

1. Meeting list page
1. Meeting map
1. Meeting detail page
1. Edit meeting
1. Edit location

== Changelog ==

= 2.15 =
* Sites may now control their level of sharing
* CSVs and Google Sheets can now be data sources
* Support for User Role Editor plugin
* FAQ item for any day view

= 2.14.14 =
* Upcoming meetings now include meetings that started in the last 30 minutes
* CSS meeting edit screen fix for Safari from Tech2Serve

= 2.14.13 =
* Adding region filter to admin Meetings screen
* Adding donate link

= 2.14.12 =
* Fixing Bootstrap dropdown conflict

= 2.14.11 =
* Fixing directions button on meeting detail page

= 2.14.10 =
* Adding Debtors Anonymous
* Adding 12 x 12 AA type per Cincinnati

= 2.14.9 =
* Location panel wasn't showing up on meeting detail page
* Making functions all overridable 

= 2.14.8 =
* Fixing warnings noticed by Charlotte
* New meeting notification

= 2.14.7 =
* Starting to add Schema.org/Event microdata for SEO per Long Beach
* District change notification per Kentucky
* Type checkbox issue per San Jose

= 2.14.6 =
* Adding district, if present, to meeting detail page

= 2.14.5 =
* Fixing Twenty Fourteen 'sticky masthead' issue
* Don't repeat the region if it's already in the address (on detail pages)
* You can now optionally specify the meeting's slug (helps to preserve app data integrity)
* Clears the search field when you change search modes

= 2.14.4 =
* Adding Refuge Recovery
* Fixing control margin
* Changing link in feedback email to be public meeting URL (per Mississippi)
* Improved email appearance

= 2.14.3 =
* Fixing error message on single location page

= 2.14.2 =
* Fixing district-related notices on import (per NJ) and meeting edit page
* Fixing Twenty Fourteen footer negative margin
* Delete all before importing now includes districts
* Extending geocoding timeout
* Fixed meetings being saved as drafts when they should have been published
* You can now remove a meeting's location (it will be saved as a draft)

= 2.14.1 =
* When region is empty, it now guesses based on Google geocoded city
* When changing meeting locations, address change checkbox is made visible

= 2.14 =
* Major edits to meeting and location detail pages (warning: if you have custom versions of these pages you will need to update them)
* Fixing side admin menu bug on Districts page
* Adding foundations for group contributions (not live yet)
* Notes fields now being trimmed

= 2.13.6 =
* Fixing bug wherein if you save a meeting as a draft, all the other meetings at that location are saved as draft

= 2.13.5 =
* Forgot short name for HA

= 2.13.4 =
* Version bump

= 2.13.3 =
* Cleaning up some PHP notices
* Listing for Heroin Anonymous

= 2.13.2 =
* Fixing address for meeting location in New York City

= 2.13.1 =
* Adding abbreviated program name to page title for SEO (requested by Area 37)
* Waiting to set strings until the `plugins_loaded` hook for Polylang plugin (requested by NA Poland)
* Updated open source license

= 2.13 =
* New districts taxonomy for Areas 24 and 46